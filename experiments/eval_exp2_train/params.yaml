run_name: "eval_exp2_train"
seed: 42 # for seq 4

distributed:
  cuda_visible_devices: "0"
  nproc_per_node: 1
  master_port: 29512

log:
  wandb_project: "test_name"
  batch_log_interval: 1

sampling:
  num_paraphrase_from_facts_to_learn: 1
  num_paraphrase_from_facts_to_refuse: 2
  num_true_output_neighbor_from_facts_to_learn: 1
  num_true_output_neighbor_from_facts_to_refuse: 1
  num_paraphrase_from_other_facts: 1
  num_true_output_neighbor_from_other_facts: 0
  max_total_io_pairs_per_sample: 4
  num_io_pairs_to_chunk: 2
  max_new_tokens: 1

loop:
  completions_batch_sample_count: 1
  sequence_length: 1
  unlearning: false

data:
  val_ood_datasets:
    - "../../data/counterfact_gnm/data/train/train_0.json"
  val_limit: null
  #---
  # -------------------------------------------------
  # Experiment 2 Train
  # ---
  eligible_target_types_val_ood:
    - "fact_subcategories"
    - "fact_categories"
    - "formats"
    - "refusal_categories"
    - "refusal_subcategories"
  holdout_targets_val_ood: 
    - "xml"
    - "continents"
    - "science_academia_law_medicine_related_occupation"
    - "northern_central_european_languages"
    - "religion"
    - "continents_refusal"
    - "northern_central_european_languages_refusal"
    - "science_academia_law_medicine_related_occupation_refusal"
    - "religion_refusal"
  holdout_target_values_val_ood:
    - "json_text"
    - "json_content"
    - "yaml_text"
    - "yaml_content"
    - "csv_text"
    - "csv_content"
    - "toml_text"
    - "toml_content"

evals:
  - model: memoryllm_chat
    run_key: gnm
    pretty_name: "GNM"
    model_state_dict_path: "../../models/gnm_all/model.pth"
  - model: llama3_8b_instruct_rag
    run_key: rag_trained
    pretty_name: "Llama3 RAG Trained"
    model_state_dict_path: "../../models/rag_all/model.pth"
  - model: llama3_8b_instruct_rag
    run_key: rag_untrained
    pretty_name: "Llama3 RAG Untrained"
    model_state_dict_path: null
  - model: memoryllm_chat_no_memory
    run_key: naive_model
    pretty_name: "Naive Model"
    model_state_dict_path: null
  - model: llama3_8b_instruct
    run_key: llama3_ft
    pretty_name: "Finetuned Llama3"
    model_state_dict_path: "../../models/icl_all/model.pth"
  - model: llama3_8b_instruct
    run_key: llama3
    pretty_name: "Llama3"
    model_state_dict_path: null
  - model: memoryllm_chat
    run_key: memoryllm
    pretty_name: "MemoryLLM"
    model_state_dict_path: null